"use strict";console.clear();class Grain{constructor(t){this.patternSize=150,this.patternScaleX=1,this.patternScaleY=1,this.patternRefreshInterval=3,this.patternAlpha=30,this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.patternScaleX,this.patternScaleY),this.patternCanvas=document.createElement("canvas"),this.patternCanvas.width=this.patternSize,this.patternCanvas.height=this.patternSize,this.patternCtx=this.patternCanvas.getContext("2d"),this.patternData=this.patternCtx.createImageData(this.patternSize,this.patternSize),this.patternPixelDataLength=this.patternSize*this.patternSize*4,this.resize=this.resize.bind(this),this.loop=this.loop.bind(this),this.frame=0,window.addEventListener("resize",this.resize),this.resize(),window.requestAnimationFrame(this.loop)}resize(){this.canvas.width=window.innerWidth*devicePixelRatio,this.canvas.height=window.innerHeight*devicePixelRatio}update(){let{patternPixelDataLength:t,patternData:e,patternAlpha:a,patternCtx:i}=this;for(let s=0;s<t;s+=4){let r=255*Math.random();e.data[s]=r,e.data[s+1]=r,e.data[s+2]=r,e.data[s+3]=a}i.putImageData(e,0,0)}draw(){let{ctx:t,patternCanvas:e,canvas:a}=this,{width:i,height:s}=a;t.clearRect(0,0,i,s),t.fillStyle=t.createPattern(e,"repeat"),t.fillRect(0,0,i,s)}loop(){let t=++this.frame%this.patternRefreshInterval==0;t&&(this.update(),this.draw()),window.requestAnimationFrame(this.loop)}}document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector(".grain");new Grain(t)});
